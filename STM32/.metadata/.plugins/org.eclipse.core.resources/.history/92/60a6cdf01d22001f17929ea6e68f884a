/*
 * traj.c
 *
 *  Created on: May 30, 2024
 *      Author: 23877
 */

#include "traj.h"

#include <stdint.h>

void Start_Local_Traj(unsigned char traj_type){
	switch (traj_type)
	{
		case UPDOWN:
			break;
		case LINE:
			break;
		case CIRCLE:
			break;
		default:
			break;
	}
}

void Start_Global_Traj(unsigned char traj_type){
	switch (traj_type)
	{
		case NO_OBS:
			break;
		case OBS:
			break;
		default:
			break;
	}
}

CSVData 	 Read_CSV(const char *filename)
{
	CSVData csvData = { .data = NULL, .rows = 0, .cols = MAX_COLS };

	// 打开CSV文件进行读取
	FILE *file = fopen(filename, "r");
	if (file == NULL) {
		printf("Error opening file.\n");
		return 1;
	}

	// 读取并解析文件中的每一行
	char line[1024];
	while (fgets(line, sizeof(line), file)) {
		// 移除换行符
		line[strcspn(line, "\r\n")] = 0;

		int cols = parseLine(line, csvData.data[csvData.rows], MAX_COLS);
		if (csvData.rows == 0) {
			csvData.cols = cols;  // 设置列数
		}
		csvData.rows++;
	}

	fclose(file);
	return csvData;
}
